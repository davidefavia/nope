<div>
  <form name="userForm" ng-submit="save()">
    <div class="form-group" ng-if="!user.id">
      <label>Username</label>
      <input type="text" name="username" class="form-control" ng-model="user.username" required />
    </div>
    <div class="form-group" ng-if="!user.id">
      <label>Password</label>
      <input type="password" name="password" class="form-control" ng-model="user.password" required />
    </div>
    <div class="form-group" ng-if="!user.id">
      <label>Confirm password</label>
      <input type="password" name="confirm" class="form-control" ng-model="user.confirm" required />
    </div>
    <div class="form-group">
      <label>Pretty name</label>
      <input type="text" name="prettyname" class="form-control" ng-model="user.pretty_name" />
    </div>
    <div class="checkbox">
      <label>
        <input type="checkbox" ng-model="user.enabled" ng-true-value="1" ng-false-value="0"> Enabled
      </label>
    </div>
    <div class="form-group">
      <label>Email</label>
      <input type="email" name="email" class="form-control" ng-model="user.email" required />
    </div>
    <div class="form-group">
      <label>Role</label>
      <select name="role" class="form-control" ng-model="user.role" required ng-disabled="!currentUser.isAdmin() || currentUser.id===user.id">
        <option ng-repeat="r in rolesList" value="{{r.key}}">{{r.label}}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Description</label>
      <textarea name="description" class="form-control" ng-model="user.description"></textarea>
    </div>
    <div class="form-grop">
      <span ng-if="changed">Changes happened!</span>
      <a href="" ng-click="reset();" ng-if="changed">Reset</a>
      <button class="btn" ng-disabled="userForm.$invalid">Save</button>
    </div>
  </form>
</div>
